import{DramaType,classList}from"../enum/Types.js";import Setting from"../setting/Setting.js";import{goodMessage}from"../constants/Constants.js";export default class Message{constructor(e,t,r=null){if(e===DramaType.Ball&&null===r)throw new Error("OriginalMessage cannot be null when type is Ball!");this.originalMessage=r,this.type=e,this.obj=t}static createObjWithString(e){for(var t of Object.values(DramaType)){var r="@"+t+":";if(e.startsWith(r))return Message.processType(t,e.replace(r,""))}throw new Error("Unknow type : "+e)}static processType(e,t){switch(e){case DramaType.Ball:var r=t.replace(Setting.drama_fineSentence,goodMessage);return new Message(e,r,r);case DramaType.Function:var a,s=t.replace(/[();]/g,""),n=null;for(a in classList){var o=classList[a];if(o&&"function"==typeof(n=o[s]))break}if("function"!=typeof n)throw new Error(`Unknow function : ${n}, name : `+s);return new Message(e,n);case DramaType.Image:r=document.createElement("img");return r.src=Setting.imageSrcFolder+t,r.classList.add(Setting.stableSizeTag),new Message(e,r);default:throw new Error(`Unknow type : ${e}, string : `+t)}}static getHelloMsg(){var e=(new Date).getHours();return 4<=e&&e<12?Setting.goodMorning:12<=e&&e<18?Setting.goodAfterNoon:Setting.goodNight}}