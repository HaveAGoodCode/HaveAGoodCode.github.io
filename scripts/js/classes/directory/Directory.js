import Drama,{DramaType}from"../drama/Dramas.js";import Left from"../left/Left.js";import{processMessage}from"../message/Message.js";import MessageID from"../message/MessageID.js";export default class DirectoryManager{static createDirectory(e,t){e.forEach(r=>{var e=document.createElement("li");e.textContent=r.name,e.addEventListener("click",e=>{e.stopPropagation(),r.action&&r.action()}),t.appendChild(e),r.children&&((e=document.createElement("ul")).style.marginLeft="1%",t.appendChild(e),DirectoryManager.createDirectory(r.children,e))})}static processMenuItems(e){e.forEach(r=>{if(r.action){let e=new Function("MessageID","Drama","DramaType","Left","processMessage",r.action);r.action=()=>e(MessageID,Drama,DramaType,Left,processMessage)}r.children&&DirectoryManager.processMenuItems(r.children)})}static initializeDirectory(){let r=document.getElementById("directory-list");fetch("./menu.json").then(e=>{if(e.ok)return e.json();throw new Error("HTTP error! status: "+e.status)}).then(e=>{e=JSON.parse(JSON.stringify(e.menuItems));DirectoryManager.processMenuItems(e),DirectoryManager.createDirectory(e,r)}).catch(e=>{console.error("Failed to load JSON:",e)})}}